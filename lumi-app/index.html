<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lumi</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Main Card -->
  <div class="card" id="container">
    
    <!-- Hidden Mode Progress Indicator (visible when app is hidden) -->
    <div class="hidden-indicator" id="hiddenIndicator">
      <div class="hidden-progress-track">
        <div class="hidden-progress-fill" id="hiddenProgressFill"></div>
      </div>
    </div>
    
    <!-- Top Bar actions (hidden by default) -->
    <div class="actions-bar-left">
      <div class="action-btn settings-trigger" onclick="toggleSettings()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
      </div>
    </div>
    
    <div class="actions-bar">
      <div class="action-btn hide-trigger" id="hideBtn" onclick="toggleHideMode()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      </div>
      <div class="action-btn close-trigger" onclick="window.close()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
      </div>
    </div>

    <!-- Content Wrapper -->
    <div class="content-wrapper">
      
      <!-- Lumi Face (Compact) -->
      <div class="face-container">
        <svg class="progress-ring" viewBox="0 0 100 100">
          <!-- Track -->
          <circle class="ring-bg" cx="50" cy="50" r="44" />
          <!-- Progress -->
          <circle class="ring-progress" id="progressRing" cx="50" cy="50" r="44" />
        </svg>
        
        <div class="eyes">
          <div class="eye left"></div>
          <div class="eye right"></div>
        </div>
      </div>

      <!-- Timer & Controls Group -->
      <div class="info-group">
        <div class="timer-display" id="timer">25:00</div>
        
        <div class="controls-dock">
          <button class="dock-btn secondary" id="skipBtn" onclick="skipMode()" title="Skip">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
          </button>
          
          <button class="dock-btn primary" id="startBtn" onclick="toggleTimer()">
            <svg id="playIcon" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            <svg id="pauseIcon" class="hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </button>
        </div>
      </div>

    </div>

    <!-- Settings Overlay (Slides Up) -->
    <div class="settings-overlay" id="settings">
      <div class="settings-header">
        <span>Preferences</span>
        <button class="close-settings-btn" onclick="saveSettings()">Done</button>
      </div>
      
      <div class="settings-scroll">
        <!-- Duration Section -->
        <div class="setting-group">
          <label class="setting-label">FOCUS DURATION</label>
          <div class="stepper">
            <button onclick="adjustTime('focus', -1)">−</button>
            <span class="stepper-value" id="focusValue" onclick="enableEdit('focus')">25m</span>
            <input type="number" class="stepper-input" id="focusInput" value="25" min="1" max="120" onblur="finishEdit('focus')" onkeydown="handleEditKey(event, 'focus')">
            <button onclick="adjustTime('focus', 1)">+</button>
          </div>
        </div>

        <div class="setting-group">
          <label class="setting-label">BREAK DURATION</label>
          <div class="stepper">
            <button onclick="adjustTime('break', -1)">−</button>
            <span class="stepper-value" id="breakValue" onclick="enableEdit('break')">5m</span>
            <input type="number" class="stepper-input" id="breakInput" value="5" min="1" max="60" onblur="finishEdit('break')" onkeydown="handleEditKey(event, 'break')">
            <button onclick="adjustTime('break', 1)">+</button>
          </div>
        </div>

        <!-- Toggles -->
        <div class="setting-row">
          <span>Auto-start Break</span>
          <label class="switch">
            <input type="checkbox" id="autoStartBreak">
            <span class="slider"></span>
          </label>
        </div>
        
        <div class="setting-row">
          <span>Auto-start Focus</span>
          <label class="switch">
            <input type="checkbox" id="autoStartFocus">
            <span class="slider"></span>
          </label>
        </div>

        <!-- Note about saving -->
        <!-- Removed Apply Changes button -->
      </div>
    </div>

  </div>

  <script src="timer.js"></script>
</body>
</html>